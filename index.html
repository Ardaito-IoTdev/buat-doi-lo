<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Matrix Animation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }

        #matrixCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2;
        }

        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3;
            display: flex;
            gap: 10px;
        }

        button {
            background: rgba(255, 20, 147, 0.3);
            border: 2px solid #ff1493;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        button:hover {
            background: rgba(255, 20, 147, 0.6);
            transform: scale(1.05);
        }

        button.active {
            background: rgba(255, 20, 147, 0.8);
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>
    <canvas id="particleCanvas"></canvas>
    
    <div class="controls">
        <button onclick="showMessage1()">Message 1</button>
        <button onclick="showMessage2()">Message 2</button>
        <button onclick="showHeart()">Heart</button>
    </div>

    <script>
        // Matrix Rain Effect
        const matrixCanvas = document.getElementById('matrixCanvas');
        const matrixCtx = matrixCanvas.getContext('2d');

        matrixCanvas.width = window.innerWidth;
        matrixCanvas.height = window.innerHeight;

        const matrixChars = 'iloveyoumore';
        const fontSize = 16;
        const columns = matrixCanvas.width / fontSize;
        const drops = [];

        for (let i = 0; i < columns; i++) {
            drops[i] = Math.random() * -100;
        }

        function drawMatrix() {
            matrixCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);

            matrixCtx.fillStyle = '#ff1493';
            matrixCtx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = matrixChars[Math.floor(Math.random() * matrixChars.length)];
                matrixCtx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 35);

        // Particle System
        const particleCanvas = document.getElementById('particleCanvas');
        const particleCtx = particleCanvas.getContext('2d');

        particleCanvas.width = window.innerWidth;
        particleCanvas.height = window.innerHeight;

        class Particle {
            constructor(x, y, targetX, targetY, delay = 0) {
                this.x = Math.random() * particleCanvas.width;
                this.y = Math.random() * particleCanvas.height;
                this.targetX = targetX;
                this.targetY = targetY;
                this.size = Math.random() * 3 + 2;
                this.delay = delay;
                this.time = 0;
                this.speed = 0.02;
                this.glow = Math.random() * 50 + 50;
            }

            update() {
                if (this.time < this.delay) {
                    this.time++;
                    return;
                }

                const dx = this.targetX - this.x;
                const dy = this.targetY - this.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance > 1) {
                    this.x += dx * this.speed;
                    this.y += dy * this.speed;
                }
            }

            draw() {
                if (this.time < this.delay) return;

                const gradient = particleCtx.createRadialGradient(
                    this.x, this.y, 0,
                    this.x, this.y, this.size * 2
                );
                gradient.addColorStop(0, `rgba(255, 255, 255, 1)`);
                gradient.addColorStop(0.5, `rgba(255, 20, 147, 0.8)`);
                gradient.addColorStop(1, `rgba(255, 20, 147, 0)`);

                particleCtx.fillStyle = gradient;
                particleCtx.beginPath();
                particleCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                particleCtx.fill();
            }
        }

        class FloatingHeart {
            constructor() {
                this.x = Math.random() * particleCanvas.width;
                this.y = particleCanvas.height + 20;
                this.size = Math.random() * 20 + 10;
                this.speed = Math.random() * 2 + 1;
                this.opacity = Math.random() * 0.5 + 0.5;
                this.drift = Math.random() * 2 - 1;
            }

            update() {
                this.y -= this.speed;
                this.x += this.drift;
                if (this.y < -50) {
                    this.y = particleCanvas.height + 20;
                    this.x = Math.random() * particleCanvas.width;
                }
            }

            draw() {
                particleCtx.save();
                particleCtx.globalAlpha = this.opacity;
                particleCtx.fillStyle = '#ff1493';
                particleCtx.font = `${this.size}px Arial`;
                particleCtx.fillText('❤', this.x, this.y);
                particleCtx.restore();
            }
        }

        let particles = [];
        let floatingHearts = [];
        let currentAnimation = null;

        // Create text particles
        function createTextParticles(text, centerX, centerY, scale = 1) {
            particles = [];
            particleCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
            
            particleCtx.font = `bold ${80 * scale}px Arial`;
            particleCtx.fillStyle = 'white';
            particleCtx.textAlign = 'center';
            particleCtx.textBaseline = 'middle';
            
            particleCtx.fillText(text, centerX, centerY);
            
            const imageData = particleCtx.getImageData(0, 0, particleCanvas.width, particleCanvas.height);
            particleCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
            
            const gap = 4;
            for (let y = 0; y < particleCanvas.height; y += gap) {
                for (let x = 0; x < particleCanvas.width; x += gap) {
                    const index = (y * particleCanvas.width + x) * 4;
                    const alpha = imageData.data[index + 3];
                    
                    if (alpha > 128) {
                        particles.push(new Particle(x, y, x, y, Math.random() * 100));
                    }
                }
            }
        }

        // Create heart shape
        function createHeartShape() {
            particles = [];
            floatingHearts = [];
            
            const centerX = particleCanvas.width / 2;
            const centerY = particleCanvas.height / 2 - 50;
            const scale = 15;
            
            // Create heart outline particles
            for (let t = 0; t < Math.PI * 2; t += 0.02) {
                const x = centerX + scale * 16 * Math.pow(Math.sin(t), 3);
                const y = centerY - scale * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                particles.push(new Particle(x, y, x, y, Math.random() * 100));
            }
            
            // Add text inside heart
            const text = "I Love You Sayang ❤";
            particleCtx.font = 'bold 30px Arial';
            particleCtx.fillStyle = 'white';
            particleCtx.textAlign = 'center';
            particleCtx.textBaseline = 'middle';
            particleCtx.fillText(text, centerX, centerY);
            
            const imageData = particleCtx.getImageData(0, 0, particleCanvas.width, particleCanvas.height);
            particleCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
            
            const gap = 3;
            for (let y = centerY - 40; y < centerY + 40; y += gap) {
                for (let x = centerX - 200; x < centerX + 200; x += gap) {
                    const index = (y * particleCanvas.width + x) * 4;
                    const alpha = imageData.data[index + 3];
                    
                    if (alpha > 128) {
                        particles.push(new Particle(x, y, x, y, Math.random() * 100));
                    }
                }
            }
            
            // Create floating hearts
            for (let i = 0; i < 30; i++) {
                floatingHearts.push(new FloatingHeart());
            }
        }

        function animate() {
            particleCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
            
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            
            floatingHearts.forEach(heart => {
                heart.update();
                heart.draw();
            });
            
            requestAnimationFrame(animate);
        }

        function showMessage1() {
            createTextParticles('Hei', particleCanvas.width / 2, particleCanvas.height / 2, 1.5);
            setTimeout(() => {
                createTextParticles('Babe !', particleCanvas.width / 2, particleCanvas.height / 2, 1.5);
            }, 2000);
        }

        function showMessage2() {
            createTextParticles('I Love You', particleCanvas.width / 2, particleCanvas.height / 2 - 40, 1);
            setTimeout(() => {
                const oldParticles = [...particles];
                createTextParticles('More ❤', particleCanvas.width / 2, particleCanvas.height / 2 + 40, 1);
                particles = [...oldParticles, ...particles];
            }, 1500);
        }

        function showHeart() {
            createHeartShape();
        }

        // Start with first message
        setTimeout(() => showMessage1(), 1000);
        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            particleCanvas.width = window.innerWidth;
            particleCanvas.height = window.innerHeight;
        });
    </script>
</body>
</html>